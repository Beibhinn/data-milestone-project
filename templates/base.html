<!DOCTYPE html>
<html>

<head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>

<body>

<nav>
    <div class="nav-wrapper">
        <a href="#" class="brand-logo center">Logo</a>
        <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
        <ul id="nav-mobile" class="left hide-on-med-and-down">
            <li><a href="#">Link1</a></li>
            <li><a href="#">Link2</a></li>
            <li><a href="#">Link3</a></li>
        </ul>
        <div class="right">
        {% if 'username' in session %}
            <a href="{{url_for('user_recipes', user_name=session['username'])}}">{{ session['username'] }}<i class="material-icons" style="display: inline-block">account_circle</i></a>
        {% else %}
            <a class="waves-effect waves-light btn" href="{{ url_for('login') }}">Sign in</a>
            <a class="waves-effect waves-light btn" href="{{ url_for('register') }}">Register</a>
        {% endif %}
        </div>
    </div>
</nav>
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="flashes toast" style="position: initial">
    {% for message in messages %}
        <p>{{ message }}</p>
    {% endfor %}
        <i class="close material-icons">close</i>
    </div>
  {% endif %}
{% endwith %}
<div class="container">
    {% block content %} {% endblock %}
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
    $(document).ready(function () {
        $('select').formSelect();
    });
    $('.input-recipe-tags').chips({
        placeholder: 'Enter a tag',
        secondaryPlaceholder: '+Tag',
        autocompleteOptions: {
            data: {
                'Tag1': null,
                'Tag2': null,
                'Tag3': null
            },
            limit: Infinity,
            minLength: 1
        }
    });
    $('#add_new').click(function () {
	    JSON.stringify(M.Chips.getInstance($('.input-recipe-tags')).chipsData);
    });
    $('#form').submit(function () {
        let tags = M.Chips.getInstance($('.input-recipe-tags')).chipsData;
        let input = $("<input>")
            .attr("type", "hidden")
            .attr("name", "tag_name")
            .val(JSON.stringify(tags));
        $(this).append(input);
        return true;
    });
    $(".close").on('click', function () {
        event.target.parentElement.remove()
    });

</script>
{% block scripts %} {% endblock %}
</body>

</html>